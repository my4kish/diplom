<div class="kanban">
  <div class="kanban-container">
    <p-panel header="New" [toggleable]="true">
      <div
        class="kanban-column"
        id="new"
        cdkDropList
        #newList="cdkDropList"
        [cdkDropListData]="new"
        [cdkDropListConnectedTo]="[inProgressList, completedList, overdueList]"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of new; track item) {
        <div class="task-box" *ngIf="item.status === 'new'" cdkDrag>
          <p-card header="{{ item.title }}" >
            <p class="m-0">{{ item.description }}</p>
            <p class="m-0">Status: {{ item.status }}</p>
            <p-avatar-group>
              <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" shape="circle" />
              <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/asiyajavayant.png" shape="circle" />
              <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/onyamalimba.png" shape="circle" />
              <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/ionibowcher.png" shape="circle" />
              <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/xuxuefeng.png" shape="circle" />
              <p-avatar label="+2" shape="circle" />
          </p-avatar-group>
          </p-card>
        </div>
        }
      </div>
    </p-panel>
    <p-panel header="In progress" [toggleable]="true">
      <div
        class="kanban-column"
        id="in_progress"
        cdkDropList
        #inProgressList="cdkDropList"
        [cdkDropListData]="inProgress"
        [cdkDropListConnectedTo]="[newList, completedList, overdueList]"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of inProgress; track item) {
        <div class="task-box" *ngIf="item.status === 'in_progress'" cdkDrag>
          <p-card header="{{ item.title }}">
            <p class="m-0">{{ item.description }}</p>
            <p class="m-0">Status: {{ item.status }}</p>
          </p-card>
        </div>
        }
      </div>
    </p-panel>
    <p-panel header="Completed" [toggleable]="true">
      <div
        class="kanban-column"
        id="completed"
        cdkDropList
        #completedList="cdkDropList"
        [cdkDropListData]="completed"
        [cdkDropListConnectedTo]="[newList, inProgressList, overdueList]"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of completed; track item) {
        <div class="task-box" *ngIf="item.status === 'completed'" cdkDrag>
          <p-card header="{{ item.title }}">
            <p class="m-0">{{ item.description }}</p>
            <p class="m-0">Status: {{ item.status }}</p>
          </p-card>
        </div>
        }
      </div>
    </p-panel>
    <p-panel header="Overdue" [toggleable]="true">
      <div
        class="kanban-column"
        id="overdue"
        cdkDropList
        #overdueList="cdkDropList"
        [cdkDropListData]="overdue"
        [cdkDropListConnectedTo]="[newList, inProgressList, completedList]"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of overdue; track item) {
        <div class="task-box" *ngIf="item.status === 'overdue'" cdkDrag>
          <p-card header="{{ item.title }}">
            <p class=" m-0">{{ item.description }}</p>
            <p class="m-0">Status: {{ item.status }}</p>
          </p-card>
        </div>
        }
      </div>
    </p-panel>
  </div>
</div>
