<div class="kanban">
  <div class="kanban-container">
    <p-panel header="Новые" [toggleable]="true" class="">
      <div
        class="kanban-column"
        id="new"
        cdkDropList
        #newList="cdkDropList"
        [cdkDropListData]="new"
        [cdkDropListConnectedTo]="[inProgressList, completedList, overdueList]"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of new; track item) {
        <div class="task-box" *ngIf="item.status === 'new'" cdkDrag>
          <app-task-card [item]="item"></app-task-card>
        </div>
        }
      </div>
    </p-panel>
    <p-panel header="В процессе" [toggleable]="true">
      <div
        class="kanban-column"
        id="in_progress"
        cdkDropList
        #inProgressList="cdkDropList"
        [cdkDropListData]="inProgress"
        [cdkDropListConnectedTo]="[newList, completedList, overdueList]"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of inProgress; track item) {
        <div class="task-box" *ngIf="item.status === 'in_progress'" cdkDrag>
          <app-task-card [item]="item"></app-task-card>
        </div>
        }
      </div>
    </p-panel>
    <p-panel header="Выполнены" [toggleable]="true">
      <div
        class="kanban-column"
        id="completed"
        cdkDropList
        #completedList="cdkDropList"
        [cdkDropListData]="completed"
        [cdkDropListConnectedTo]="[newList, inProgressList, overdueList]"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of completed; track item) {
        <div class="task-box" *ngIf="item.status === 'completed'" cdkDrag>
          <app-task-card [item]="item"></app-task-card>
        </div>
        }
      </div>
    </p-panel>
    <p-panel header="Просрочены" [toggleable]="true">
      <div
        class="kanban-column"
        id="overdue"
        cdkDropList
        #overdueList="cdkDropList"
        [cdkDropListData]="overdue"
        [cdkDropListConnectedTo]="[newList, inProgressList, completedList]"
        (cdkDropListDropped)="drop($event)"
      >
        @for (item of overdue; track item) {
        <div class="task-box" *ngIf="item.status === 'overdue'" cdkDrag>
          <app-task-card [item]="item"></app-task-card>
        </div>
        }
      </div>
    </p-panel>
  </div>
</div>
